<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700" role="img" aria-label="RUNE Error Handling Flow">
  <title>RUNE Error Handling Flow</title>
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#111"/>
    </marker>
    <style>
      .box { fill: #fff; stroke: #111; stroke-width: 2; rx: 12; ry: 12; }
      .label { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Liberation Sans", sans-serif;
                font-size: 16px; fill: #111; }
      .title { font-size: 20px; font-weight: 700; }
      .small { font-size: 14px; }
      .line { stroke: #111; stroke-width: 2; fill: none; marker-end: url(#arrow); }
      .dash { stroke-dasharray: 6 6; }
      .note { font-size: 13px; fill: #111; }
    </style>
  </defs>
  <rect x="0" y="0" width="1200" height="700" fill="#fff"/>
<text class="label title" x="24" y="36">RUNE Error Handling Flow (EPS)</text>
<text class="label note" x="24" y="60">From request validation to execution failure mapping and reporting.</text>
<rect class="box" x="90" y="120" width="300" height="80"/>
<text class="label" x="240.0" y="154.0" text-anchor="middle">Start</text>
<text class="label" x="240.0" y="174.0" text-anchor="middle">RCS request received</text>
<rect class="box" x="90" y="240" width="300" height="80"/>
<text class="label" x="240.0" y="274.0" text-anchor="middle">Validate request</text>
<text class="label" x="240.0" y="294.0" text-anchor="middle">(schema, routing)</text>
<rect class="box" x="90" y="360" width="300" height="80"/>
<text class="label" x="240.0" y="394.0" text-anchor="middle">Select execution mode</text>
<text class="label" x="240.0" y="414.0" text-anchor="middle">(local/remote)</text>
<rect class="box" x="90" y="480" width="300" height="80"/>
<text class="label" x="240.0" y="514.0" text-anchor="middle">Invoke plugin</text>
<text class="label" x="240.0" y="534.0" text-anchor="middle">(BPCS stdin)</text>
<rect class="box" x="500" y="480" width="300" height="80"/>
<text class="label" x="650.0" y="514.0" text-anchor="middle">Parse plugin output</text>
<text class="label" x="650.0" y="534.0" text-anchor="middle">(BPCS stdout)</text>
<rect class="box" x="900" y="420" width="300" height="80"/>
<text class="label" x="1050.0" y="454.0" text-anchor="middle">Success:</text>
<text class="label" x="1050.0" y="474.0" text-anchor="middle">RCS result response</text>
<rect class="box" x="500" y="600" width="300" height="80"/>
<text class="label" x="650.0" y="634.0" text-anchor="middle">Failure:</text>
<text class="label" x="650.0" y="654.0" text-anchor="middle">Map to EPS</text>
<rect class="box" x="900" y="600" width="300" height="80"/>
<text class="label" x="1050.0" y="634.0" text-anchor="middle">Route EPS to</text>
<text class="label" x="1050.0" y="654.0" text-anchor="middle">ErrorHandler</text>
<path class="line" d="M 240 200 L 240 240"/>
<path class="line" d="M 240 320 L 240 360"/>
<path class="line" d="M 240 440 L 240 480"/>
<path class="line" d="M 390 520 L 500 520"/>
<text class="label small" x="445.0" y="512.0" text-anchor="middle">stdout + code</text>
<path class="line" d="M 650 520 L 900 460"/>
<text class="label small" x="775.0" y="482.0" text-anchor="middle">valid + exit=0</text>
<path class="line" d="M 650 560 L 650 600"/>
<text class="label small" x="650.0" y="572.0" text-anchor="middle">invalid / non-zero</text>
<path class="line" d="M 800 640 L 900 640"/>
<text class="label small" x="850.0" y="632.0" text-anchor="middle">EPS event</text>
<path class="line dash" d="M 1050 600 L 1050 580"/>
<text class="label note" x="500" y="680">ErrorHandler may log, normalize, attach recovery hints, and return a user-safe summary.</text>

</svg>
